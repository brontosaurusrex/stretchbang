#!/bin/bash

# drawTerm

# needs: slop, urxvt, wmctrl

# brex 2018

# license: WTFPL â€“ Do What the **** You Want to Public License

set -x

#slop -c 0.5,0.5,0.5 -b 1
read -r x y w h < <(slop -f "%x %y %w %h")

sleep="0.1"

name="term$RANDOM"

#(urxvt -title "$name" & sleep "$sleep") && xdotool search --name "$name" --sync windowactivate windowsize "$W" "$H" windowmove "$X" "$Y" &

# Will try 2nd time on active, only if first time by name fails
# Note that urxvt has a habit of naming windows based on active command, so this is a bit of blackmagic
(urxvt -title "$name" & sleep "$sleep") && \
(echo "one" && wmctrl -r "$name" -e 0,"$x","$y","$w","$h") || \
(sleep "$sleep" && echo "two" && wmctrl -r :ACTIVE: -e 0,"$x","$y","$w","$h")


