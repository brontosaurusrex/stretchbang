#!/bin/bash

# Desktop in pipe menu

where=$(xdg-user-dir DESKTOP)

cd "$where" || exit

# menu head
echo "<openbox_pipe_menu>"

# just open ~/Desktop
cat << ITEM
    <item label="desktop">
        <action name="Execute">
            <execute>thunar '$where'</execute>
        </action>
    </item>
ITEM

# fodlers
for stuff in *
do
    if [[ -d $stuff ]]; then
cat << ITEM
    <item label="$stuff">
        <action name="Execute">
            <execute>thunar '$where/$stuff'</execute>
        </action>
    </item>
ITEM
    fi
done

echo "<separator/>"

# files & links
for stuff in *
do
    if [[ -f $stuff ]]; then
cat << ITEM
    <item label="$stuff">
        <action name="Execute">
            <execute>thunar '$where/$stuff'</execute>
        </action>
    </item>
ITEM
    fi
done

# menu foot
echo "</openbox_pipe_menu>"
